<!DOCTYPE html>
<html>
<head>
  <title>Melancioüçâ</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
  <link rel="stylesheet" href="assets/style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Gemunu+Libre:wght@600&display=swap" rel="stylesheet">

</head>
<body>

  <section class="geral">
    <h1>Criptografia e Descriptografia</h1>
    <h2>Dica: A descriptografia apenas √© feita quando √© inserida uma chave.</h2>
    
      <div class="chave">
        <label for="key-encrypt">Chave:</label>
        <input type="text" id="key-encrypt" required>
      </div>
      <div class="column">
        <div class="box">
          <label for="original-message">Mensagem Original:</label>
          <textarea id="original-message" class="textarea"></textarea>
          <button onclick="encrypt()">Criptografar</button>
        </div>
        <span>=</span>
        <div class="box">
          <label for="encrypted-message">Mensagem Secreta:</label>
          <textarea class="textarea" id="encrypted-message"></textarea>
          <button onclick="decrypt()">Descriptografar</button>
        </div>
      </div>
    
  </section>

  <script>
    function encrypt() {
      const originalInput = document.getElementById("original-message");
      const encryptedInput = document.getElementById("encrypted-message");
      const keyInput = document.getElementById("key-encrypt");

      const originalMessage = originalInput.value;
      const encryptionKey = keyInput.value;

      // Criptografando a mensagem com a chave fornecida
      const encryptedMessage = CryptoJS.AES.encrypt(originalMessage, encryptionKey).toString();

      // Atualizando o campo de mensagem criptografada
      encryptedInput.value = encryptedMessage;
    }

    function decrypt() {
      const originalInput = document.getElementById("original-message");
      const encryptedInput = document.getElementById("encrypted-message");
      const keyInput = document.getElementById("key-encrypt");

      const encryptedMessage = encryptedInput.value;
      const encryptionKey = keyInput.value;

      // Descriptografando a mensagem com a chave fornecida
      const decryptedBytes = CryptoJS.AES.decrypt(encryptedMessage, encryptionKey);
      const decryptedMessage = decryptedBytes.toString(CryptoJS.enc.Utf8);

      // Atualizando o campo de mensagem original
      originalInput.value = decryptedMessage;
    }
  </script>
</body>
</html>
